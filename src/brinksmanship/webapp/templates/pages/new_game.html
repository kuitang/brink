{% extends "base.html" %}

{% block title %}New Game - Brinksmanship{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Start New Game</h1>
</div>

<div class="box" style="max-width: 600px;">
    <form method="POST">
        <div class="form-group">
            <label for="scenario_id">Scenario</label>
            <select id="scenario_id" name="scenario_id" required>
                <option value="">-- Select a Scenario --</option>
                {% for scenario in scenarios %}
                <option value="{{ scenario.id }}">
                    {{ scenario.name }} ({{ scenario.setting }})
                </option>
                {% endfor %}
            </select>
            <div id="scenario-description" class="text-muted mt-md"></div>
        </div>

        <div class="form-group">
            <label>Opponent</label>

            <h4 class="mt-md">Algorithmic Opponents</h4>
            {% for opponent in opponent_types if opponent.category == 'algorithmic' %}
            <div class="mb-md">
                <label style="display: flex; align-items: flex-start; font-weight: normal;">
                    <input type="radio" name="opponent_type" value="{{ opponent.id }}"
                           style="width: auto; margin-right: 8px; margin-top: 4px;">
                    <span>
                        <strong>{{ opponent.name }}</strong><br>
                        <span class="text-muted">{{ opponent.description }}</span>
                    </span>
                </label>
            </div>
            {% endfor %}

            <h4 class="mt-md">Historical Personas</h4>
            {% for opponent in opponent_types if opponent.category == 'persona' %}
            <div class="mb-md">
                <label style="display: flex; align-items: flex-start; font-weight: normal;">
                    <input type="radio" name="opponent_type" value="{{ opponent.id }}"
                           style="width: auto; margin-right: 8px; margin-top: 4px;">
                    <span>
                        <strong>{{ opponent.name }}</strong><br>
                        <span class="text-muted">{{ opponent.description }}</span>
                    </span>
                </label>
            </div>
            {% endfor %}
        </div>

        <button type="submit" class="btn btn-primary">Start Game</button>
        <a href="{{ url_for('lobby.index') }}" class="btn">Cancel</a>
    </form>
</div>
{% endblock %}
